<div class='page-wrapper'>

  <% if @user != current_user %>
    <h1><%= @user.username %>'s profile</h1>
  <% else %>
    <h1>My Profile</h1>
  <% end %>
	Located in: <%= @user.city %>, <%= @user.state %>
  <div>

    <h2>Game Collection</h2>

    <% @user.games.each do |game| %>
      <span class='headline'><a href="/games/<%= game.id %>"><%= game.name %></a></span><br><br>
    <% end %>
  </div>

</div>
<!-- # <% if flash[:notice] %>
#   <div class="notice"><%= flash[:notice] %></div>
# <% end %> -->

<div>
  <% if @user != current_user && user_signed_in? %>
    <%= link_to "Add Friend", friendships_path(user: current_user, friend_id: @user.id), method: :post %>
  <% end %>
</div>

<br>

<% if @user.id != current_user.id && user_signed_in? %>
  <%= render 'users/form', :target => @user %>
<% end %>

<% if @user.remarks %>
<ul>
  <% @user.remarks.each do |remark| %>
    <li><%= remark.body %> - <%= remark.user.username %> -  <%= remark.created_at.strftime("%l:%M %p - %e, %b %Y") %></li>
  <% end %>
</ul>
<% end %>

<div>
  <h1>Friend's List</h1>
    <ul>
      <% @user.friends.each do |friend| %>
        <li><%= friend.username %></li>
      <% end %>
    </ul>
</div>

<div>
  <% if @user == current_user %>
  <h2>Pending Friend Requests</h2>
  <ul>
      <% @user.requests.each do |request| %>
      <li>
        <%= request.user.username %> wants to be friends!
        <%= link_to 'Accept', friendship_path(id: request.id), method: "put" %>
        <%= link_to 'Decline', friendship_path(id: request.id), method: "delete" %>
      </li>
      <% end %>
  </ul>
  <% end %>
</div>
